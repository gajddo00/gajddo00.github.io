(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[395],{8630:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/services/[id]",function(){return t(8688)}])},9661:function(e,r,t){"use strict";var n=t(5893),i=t(1163),s=t(8339),l=t(4574),a=t(5524);r.Z=function(e){var r,t=(0,i.useRouter)();return(0,n.jsx)("div",{className:"dialog-wrapper",children:(0,n.jsxs)("div",{className:"dialog",children:[(0,n.jsx)(s.Z,{type:"medium",children:e.title}),(0,n.jsx)(s.Z,{type:"body",className:"mt-2",children:e.message}),(0,n.jsxs)("div",{className:"flex justify-between mt-10",children:[(0,n.jsx)("button",{title:"cancel",onClick:function(){return e.setVisible(!1)},children:(0,l.K)("general.cancel",t.locale)}),(0,n.jsx)(a.Z,{type:"dark",label:null!==(r=e.actionTitle)&&void 0!==r?r:(0,l.K)("general.confirm",t.locale),onClick:e.action})]})]})})}},1089:function(e,r,t){"use strict";var n=t(5893),i=t(8203),s=t(5675),l=t.n(s);r.Z=function(e){return(0,n.jsx)("div",{className:e.className,children:(0,n.jsx)("button",{type:"button",className:"flex p-3 rounded-full ".concat(e.disabled||"bg-neutral-200"),onClick:e.onClick,disabled:e.disabled,children:(0,n.jsx)(l(),{className:"rotate-180",src:i.Z,height:15,width:15,alt:"paging-button"})})})}},7754:function(e,r,t){"use strict";var n=t(5893);function i(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}r.Z=function(e){var r=e.tabTitles,t=e.currentTab,s=i(e,["tabTitles","currentTab"]);return(0,n.jsx)("div",{className:"tabview",children:Array.from(Array(3)).map((function(e,i){return(0,n.jsx)("button",{className:"tab ".concat(t==i?"tab--active":""),onClick:function(){return s.tabChanged(i)},children:r[i]},i)}))})}},8688:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return je}});var n=t(5893),i=t(7313),s=t(2855),l=t(1587),a=t(4051),o=t.n(a),c=t(8339),u=t(3272),d=t(7294),v=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,f="\\d\\d?",h="\\d\\d",m="[^\\s]+",x=/\[([^]*?)\]/gm;function p(e,r){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n].substr(0,r));return t}var g=function(e){return function(r,t){var n=t[e].map((function(e){return e.toLowerCase()})),i=n.indexOf(r.toLowerCase());return i>-1?i:null}};function j(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(var n=0,i=r;n<i.length;n++){var s=i[n];for(var l in s)e[l]=s[l]}return e}var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],y=["January","February","March","April","May","June","July","August","September","October","November","December"],w=p(y,3),M={dayNamesShort:p(b,3),dayNames:b,monthNamesShort:w,monthNames:y,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10?1:0)*e%10]}},N=j({},M),S=function(e,r){for(void 0===r&&(r=2),e=String(e);e.length<r;)e="0"+e;return e},K={D:function(e){return String(e.getDate())},DD:function(e){return S(e.getDate())},Do:function(e,r){return r.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return S(e.getDay())},ddd:function(e,r){return r.dayNamesShort[e.getDay()]},dddd:function(e,r){return r.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return S(e.getMonth()+1)},MMM:function(e,r){return r.monthNamesShort[e.getMonth()]},MMMM:function(e,r){return r.monthNames[e.getMonth()]},YY:function(e){return S(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return S(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return S(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return S(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return S(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return S(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return S(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return S(e.getMilliseconds(),3)},a:function(e,r){return e.getHours()<12?r.amPm[0]:r.amPm[1]},A:function(e,r){return e.getHours()<12?r.amPm[0].toUpperCase():r.amPm[1].toUpperCase()},ZZ:function(e){var r=e.getTimezoneOffset();return(r>0?"-":"+")+S(100*Math.floor(Math.abs(r)/60)+Math.abs(r)%60,4)},Z:function(e){var r=e.getTimezoneOffset();return(r>0?"-":"+")+S(Math.floor(Math.abs(r)/60),2)+":"+S(Math.abs(r)%60,2)}},k=function(e){return+e-1},Z=[null,f],H=[null,m],D=["isPm",m,function(e,r){var t=e.toLowerCase();return t===r.amPm[0]?0:t===r.amPm[1]?1:null}],U=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var r=(e+"").match(/([+-]|\d\d)/gi);if(r){var t=60*+r[1]+parseInt(r[2],10);return"+"===r[0]?t:-t}return 0}],Y=(g("monthNamesShort"),g("monthNames"),{default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"}),C=function(e,r,t){if(void 0===r&&(r=Y.default),void 0===t&&(t={}),"number"===typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var n=[];r=(r=Y[r]||r).replace(x,(function(e,r){return n.push(r),"@@@"}));var i=j(j({},N),t);return(r=r.replace(v,(function(r){return K[r](e,i)}))).replace(/@@@/g,(function(){return n.shift()}))};var P=function(e){return e&&""!=e?C(new Date(e),"DD.MM.YY HH:mm"):""},T=t(4574),A=t(1163),O=t.n(A),R=t(1534),E=t(8822),_=t(1089);function I(e,r,t,n,i,s,l){try{var a=e[s](l),o=a.value}catch(c){return void t(c)}a.done?r(o):Promise.resolve(o).then(n,i)}var F=function(e){var r=e.service,t=e.updateLoginStamps,i=e.filter,s=(0,d.useState)(1),l=s[0],a=s[1],u=(0,d.useState)(),v=u[0],f=u[1],h=new R.x0,m=(0,A.useRouter)();(0,d.useEffect)((function(){var e=new AbortController,n=function(){var n,s=(n=o().mark((function n(){var s,a,c;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!r.id){n.next=9;break}return n.next=5,h.servicesGetLoginHistory(r.id,i,l,10,{signal:e.signal});case 5:a=n.sent,f(null===a||void 0===a?void 0:a.data),(c=null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.items)&&t(c);case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),(0,E.U)(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})),function(){var e=this,r=arguments;return new Promise((function(t,i){var s=n.apply(e,r);function l(e){I(s,t,i,l,a,"next",e)}function a(e){I(s,t,i,l,a,"throw",e)}l(void 0)}))});return function(){return s.apply(this,arguments)}}();return n(),function(){e.abort()}}),[l,r.id,i]);var x=function(){var e,r=null===v||void 0===v?void 0:v.totalPages;return 1==r?(0,n.jsx)(n.Fragment,{}):null!==(e=null===v||void 0===v?void 0:v.totalCount)&&void 0!==e&&e?(0,n.jsxs)("div",{className:"flex mt-4 gap-3 justify-end",children:[(0,n.jsx)(_.Z,{className:"scale-x-flip",onClick:function(){return a((function(e){return e-1}))},disabled:1==l}),(0,n.jsx)(_.Z,{onClick:function(){return a((function(e){return e+1}))},disabled:r&&l==r||!1})]}):(0,n.jsx)(c.Z,{className:"mt-4",type:"body",children:(0,T.K)("general.noResults",m.locale)})};return(0,n.jsx)(x,{})};function L(e,r,t,n,i,s,l){try{var a=e[s](l),o=a.value}catch(c){return void t(c)}a.done?r(o):Promise.resolve(o).then(n,i)}var z=function(e){var r,t=e.serviceId,i=(0,d.useState)([]),l=i[0],a=i[1],v=(0,d.useState)(),f=v[0],h=v[1],m=new s.x0,x=(0,A.useRouter)();return(0,d.useEffect)((function(){var e=new AbortController,r=function(){var r,n=(r=o().mark((function r(){var n,i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!t){r.next=7;break}return r.next=4,m.servicesGetServiceDetail(t,{signal:e.signal});case 4:n=r.sent,i=null===n||void 0===n?void 0:n.data,h(i);case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),(0,E.U)(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})),function(){var e=this,t=arguments;return new Promise((function(n,i){var s=r.apply(e,t);function l(e){L(s,n,i,l,a,"next",e)}function a(e){L(s,n,i,l,a,"throw",e)}l(void 0)}))});return function(){return n.apply(this,arguments)}}();return r(),function(){e.abort()}}),[t]),(0,n.jsxs)("div",{className:"pt-3 px-8",children:[(0,n.jsx)(u.Z,{title:null!==(r=null===f||void 0===f?void 0:f.name)&&void 0!==r?r:""}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row mt-10 gap-16",children:[(0,n.jsxs)("section",{className:"flex-50",children:[(0,n.jsx)(c.Z,{type:"medium",children:(0,T.K)("service.register.desc",x.locale)}),(0,n.jsx)("table",{className:"h-table w-full mt-5",children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("service.register.name",x.locale)}),(0,n.jsx)("td",{children:null===f||void 0===f?void 0:f.name})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("service.register.desc",x.locale)}),(0,n.jsx)("td",{children:null===f||void 0===f?void 0:f.description})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("service.detail.org",x.locale)}),(0,n.jsx)("td",{children:null===f||void 0===f?void 0:f.organization})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("service.register.type",x.locale)}),(0,n.jsx)("td",{children:null===f||void 0===f?void 0:f.serviceType})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"URL"}),(0,n.jsx)("td",{children:null===f||void 0===f?void 0:f.url})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("service.register.minAuth",x.locale)}),(0,n.jsx)("td",{children:null===f||void 0===f?void 0:f.authMethod})]})]})})]}),(0,n.jsxs)("section",{className:"flex-50 overflow-x-scroll sm:overflow-hidden",children:[(0,n.jsx)(c.Z,{type:"medium",children:(0,T.K)("service.loginHistory",x.locale)}),(0,n.jsxs)("table",{className:"v-table w-full mt-5",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("service.loginHistory.place",x.locale)}),(0,n.jsx)("th",{children:(0,T.K)("service.loginHistory.timestamp",x.locale)}),(0,n.jsx)("th",{children:(0,T.K)("service.loginHistory.authMethod",x.locale)}),(0,n.jsx)("th",{children:(0,T.K)("service.loginHistory.platform",x.locale)}),(0,n.jsx)("th",{children:(0,T.K)("service.loginHistory.browser",x.locale)})]})}),(0,n.jsx)("tbody",{children:l.map((function(e,r){return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.location}),(0,n.jsx)("td",{children:P(e.timestamp)}),(0,n.jsx)("td",{children:e.method}),(0,n.jsx)("td",{children:e.platform}),(0,n.jsx)("td",{children:e.userAgent})]},r)}))})]}),f&&(0,n.jsx)(F,{service:f,updateLoginStamps:function(e){return a(e)}})]})]})]})},q=t(5544),V=t(5524),W=t(9661),X=t(5538);function G(e,r,t,n,i,s,l){try{var a=e[s](l),o=a.value}catch(c){return void t(c)}a.done?r(o):Promise.resolve(o).then(n,i)}var J=function(e){var r=e.service,t=(0,d.useState)(!1),i=t[0],s=t[1],a=new R.x3,v=(0,d.useMemo)((function(){return new AbortController}),[]),f=(0,A.useRouter)(),h=(0,l.Z)().user;(0,d.useEffect)((function(){return function(){v.abort()}}),[]);var m,x,p,g=function(){var e,t=(e=o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,a.servicesManagerDeleteService(null!==(t=r.id)&&void 0!==t?t:"",{signal:v.signal});case 4:n=e.sent,(0,X.Am)(n.data.message),f.back(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),(0,E.U)(e.t0),s(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var r=this,t=arguments;return new Promise((function(n,i){var s=e.apply(r,t);function l(e){G(s,n,i,l,a,"next",e)}function a(e){G(s,n,i,l,a,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)(W.Z,{title:(0,T.K)("service.detail.cancelRequest",f.locale),message:(0,T.K)("service.detail.cancelRequest.message",f.locale).replace("{X}",null!==(m=r.name)&&void 0!==m?m:""),setVisible:s,action:g}),(0,n.jsxs)("div",{className:"pt-3 px-8 h-screen",children:[(0,n.jsx)(u.Z,{title:null!==(x=null===r||void 0===r?void 0:r.name)&&void 0!==x?x:""}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("section",{className:"mt-10",children:[(0,n.jsx)(c.Z,{type:"medium",children:(0,T.K)("service.register.desc",f.locale)}),(0,n.jsx)("table",{className:"h-table sm:w-1/2 w-full mt-5",children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("service.register.name",f.locale)}),(0,n.jsx)("td",{children:null===r||void 0===r?void 0:r.name})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("service.register.desc",f.locale)}),(0,n.jsx)("td",{children:r.description||"\u2014"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("service.register.type",f.locale)}),(0,n.jsx)("td",{children:null===r||void 0===r?void 0:r.serviceType})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("service.register.minAuth",f.locale)}),(0,n.jsx)("td",{children:null===r||void 0===r?void 0:r.authMethod})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("service.detail.createdAt",f.locale)}),(0,n.jsx)("td",{children:P(null!==(p=null===r||void 0===r?void 0:r.createdAt)&&void 0!==p?p:"")})]}),r.url&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"URL"}),(0,n.jsx)("td",{children:null===r||void 0===r?void 0:r.url})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("service.register.authUrl",f.locale)}),(0,n.jsx)("td",{children:null===r||void 0===r?void 0:r.authorizeUrl})]}),r.logoutHookUrl&&(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("service.register.logoutUrl",f.locale)}),(0,n.jsx)("td",{children:null===r||void 0===r?void 0:r.logoutHookUrl})]})]})]})})]}),(null===h||void 0===h?void 0:h.role)==R.uU.ServiceManager&&(0,n.jsx)(V.Z,{onClick:function(){return s(!0)},type:"warning",label:(0,T.K)("service.detail.cancelRequest",f.locale),className:"btn mt-20 self-center absolute bottom-5"})]})]})]})},B=t(7754),Q=t(8152),$=t(7674),ee=t(3400),re=t(2296),te=t(4231),ne=t(5496),ie=t(7536);function se(e,r,t,n,i,s,l){try{var a=e[s](l),o=a.value}catch(c){return void t(c)}a.done?r(o):Promise.resolve(o).then(n,i)}function le(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var s=e.apply(r,t);function l(e){se(s,n,i,l,a,"next",e)}function a(e){se(s,n,i,l,a,"throw",e)}l(void 0)}))}}var ae=function(e){var r,t,i,s,l,a=e.service,c=e.triggerDeleteDialog,u=(0,d.useState)(Object.keys(R.UW).indexOf(null!==(s=a.serviceType)&&void 0!==s?s:R.UW.Website))[0],v=(0,d.useState)(Object.keys(R.Hi).indexOf(null!==(l=a.authMethod)&&void 0!==l?l:R.Hi.Password)),f=v[0],h=v[1],m=(0,A.useRouter)(),x=te.Ry({serviceName:te.Z_().required((0,T.K)("error.empty",m.locale)),description:te.Z_().max(100,(0,T.K)("error.max",m.locale).replace("{X}","100")),url:te.Z_().required((0,T.K)("error.empty",m.locale))}).required(),p=(0,ie.cI)({resolver:(0,ne.X)(x)}),g=p.register,j=p.handleSubmit,b=p.formState.errors,y=new R.x3,w=(0,d.useMemo)((function(){return new AbortController}),[]),M=function(){var e=le(o().mark((function e(r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={serviceType:(0,Q.Og)(u),serviceId:a.id,serviceName:r.serviceName,url:r.url,description:r.description,authorizeURL:a.authorizeUrl,logoutHookURL:a.logoutHookUrl,feNotificationsEnabled:a.feNotificationsEnabled,minimumAuthMethod:(0,Q.iF)(f)},e.next=3,k(t);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){return function(){w.abort()}}),[a]);var N,S,K,k=function(){var e=le(o().mark((function e(r){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.servicesManagerUpdateService(r,{signal:w.signal});case 3:t=e.sent,n=t.data,(0,X.Am)(n.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,E.U)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(r){return e.apply(this,arguments)}}();return(0,n.jsxs)("form",{className:"flex flex-col gap-5 mt-5",onSubmit:j(M),children:[(0,n.jsxs)("div",{className:"flex justify-between px-2",children:[(0,n.jsx)("label",{children:(0,T.K)("service.register.type",m.locale)}),(0,n.jsx)("label",{children:a.serviceType})]}),(0,n.jsx)(ee.Z,{value:null!==(N=a.name)&&void 0!==N?N:"",name:"serviceName",labelValue:(0,T.K)("service.register.name",m.locale),type:"text",required:!0,error:null===(r=b.serviceName)||void 0===r?void 0:r.message,register:g}),(0,n.jsx)(re.Z,{value:null!==(S=a.description)&&void 0!==S?S:"",name:"description",labelValue:(0,T.K)("service.register.desc",m.locale),type:"text",error:null===(t=b.description)||void 0===t?void 0:t.message,register:g}),a.serviceType==R.UW.Website&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ee.Z,{value:null!==(K=a.url)&&void 0!==K?K:"",name:"url",labelValue:"URL",required:!0,type:"text",error:null===(i=b.url)||void 0===i?void 0:i.message,register:g})}),(0,n.jsx)($.Z,{defaultIndex:f,valueSelected:function(e){h(e)}}),(0,n.jsxs)("div",{className:"flex flex-row self-center mt-10 gap-4",children:[(0,n.jsx)(V.Z,{onClick:function(){return c()},type:"warning",label:(0,T.K)("general.delete",m.locale),className:"btn self-center"}),(0,n.jsx)(V.Z,{submit:!0,label:(0,T.K)("general.save",m.locale),className:"btn self-center"})]})]})},oe=t(9220),ce=t(5761),ue=function(e,r){return(0,X.Am)((0,T.K)("general.copied",r.locale)),window.navigator.clipboard.writeText(e)},de={src:"/_next/static/media/copy_icon.03889d83.svg",height:12,width:11};function ve(e,r,t,n,i,s,l){try{var a=e[s](l),o=a.value}catch(c){return void t(c)}a.done?r(o):Promise.resolve(o).then(n,i)}function fe(e){return function(){var r=this,t=arguments;return new Promise((function(n,i){var s=e.apply(r,t);function l(e){ve(s,n,i,l,a,"next",e)}function a(e){ve(s,n,i,l,a,"throw",e)}l(void 0)}))}}var he=function(e){var r,t,i,s,l,a,c,u=e.service,v=te.Ry({authorizeUrl:te.Z_().required((0,T.K)("error.empty",O().locale)),logoutHookUrl:te.Z_(),feEnabled:te.Xg()}).required(),f=(0,d.useState)(null!==(i=u.feNotificationsEnabled)&&void 0!==i&&i),h=f[0],m=f[1],x=(0,d.useMemo)((function(){return new AbortController}),[]),p=new R.x3,g=(0,ie.cI)({resolver:(0,ne.X)(v)}),j=g.register,b=g.handleSubmit,y=g.formState.errors,w=function(){var e=fe(o().mark((function e(r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={serviceId:u.id,serviceName:u.name,url:u.url,description:u.description,authorizeURL:r.authorizeUrl,logoutHookURL:r.logoutHookUrl,minimumAuthMethod:u.authMethod,feNotificationsEnabled:h},e.next=3,M(t);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),M=function(){var e=fe(o().mark((function e(r){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.servicesManagerUpdateService(r,{signal:x.signal});case 3:t=e.sent,n=t.data,(0,X.Am)(n.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,E.U)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(r){return e.apply(this,arguments)}}();return(0,n.jsx)("article",{children:(0,n.jsxs)("form",{className:"flex flex-col gap-5 mt-5",onSubmit:b(w),children:[(0,n.jsx)(ee.Z,{value:null!==(s=u.appId)&&void 0!==s?s:"",name:"appId",labelValue:"App ID",type:"password",disabled:!0,accessoryIcon:de,accessoryOnClick:function(){u.appId&&ue(u.appId,O())}}),(0,n.jsx)(ee.Z,{value:null!==(l=u.publicKey)&&void 0!==l?l:"",name:"publicKey",labelValue:(0,T.K)("service.detail.publicKey",O().locale),type:"password",disabled:!0,accessoryIcon:de,accessoryOnClick:function(){u.publicKey&&ue(u.publicKey,O())}}),u.serviceType==R.UW.Website&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ee.Z,{value:null!==(a=u.authorizeUrl)&&void 0!==a?a:"",name:"authorizeUrl",labelValue:(0,T.K)("service.register.authUrl",O().locale),type:"text",required:!0,error:null===(r=y.authorizeUrl)||void 0===r?void 0:r.message,register:j}),(0,n.jsx)(ee.Z,{value:null!==(c=u.logoutHookUrl)&&void 0!==c?c:"",name:"logoutHookUrl",labelValue:(0,T.K)("service.register.logoutUrl",O().locale),type:"text",error:null===(t=y.logoutHookUrl)||void 0===t?void 0:t.message,register:j}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("label",{htmlFor:"feEnabled",className:"mr-2 ml-2",children:(0,T.K)("service.detail.feEnabled",O().locale)}),(0,n.jsx)("input",{onChange:function(e){return m(e.target.checked)},defaultChecked:h,type:"checkbox",name:"feEnabled"})]}),(0,n.jsx)(V.Z,{submit:!0,label:(0,T.K)("general.save",O().locale),className:"btn self-center mt-5"})]})]})})};function me(e,r,t,n,i,s,l){try{var a=e[s](l),o=a.value}catch(c){return void t(c)}a.done?r(o):Promise.resolve(o).then(n,i)}var xe=function(e){var r,t,i=e.service,s=(0,d.useState)([]),l=s[0],a=s[1],v=(0,d.useState)(0),f=v[0],h=v[1],m=(0,d.useState)(0),x=m[0],p=m[1],g=(0,d.useState)(!1),j=g[0],b=g[1],y=(0,d.useMemo)((function(){return new AbortController}),[]),w=new R.x3,M=(0,A.useRouter)(),N=function(e){p(e)},S=function(){var e,r=(e=o().mark((function e(){var r,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,w.servicesManagerDeleteService(null!==(r=i.id)&&void 0!==r?r:"",{signal:y.signal});case 4:t=e.sent,(0,X.Am)(t.data.message),M.back(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),(0,E.U)(e.t0),b(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var r=this,t=arguments;return new Promise((function(n,i){var s=e.apply(r,t);function l(e){me(s,n,i,l,a,"next",e)}function a(e){me(s,n,i,l,a,"throw",e)}l(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,n.jsxs)(n.Fragment,{children:[j&&(0,n.jsx)(W.Z,{title:(0,T.K)("general.confirmation",M.locale),message:(0,T.K)("service.detail.removeService.message",M.locale).replace("{X}",null!==(r=i.name)&&void 0!==r?r:""),setVisible:b,action:S,actionTitle:(0,T.K)("general.delete",M.locale)}),(0,n.jsxs)("div",{className:"pt-3 px-8 pb-10",children:[(0,n.jsx)(u.Z,{title:null!==(t=null===i||void 0===i?void 0:i.name)&&void 0!==t?t:""}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row mt-10 gap-16",children:[(0,n.jsxs)("article",{className:"flex flex-col flex-50",children:[(0,n.jsx)(B.Z,{tabTitles:[(0,T.K)("service.register.desc",M.locale),(0,T.K)("service.detail.integration",M.locale)],currentTab:f,tabChanged:function(e){return h(e)}}),function(){switch(f){case 0:return(0,n.jsx)(ae,{service:i,triggerDeleteDialog:function(){return b(!0)}});case 1:return(0,n.jsx)(he,{service:i})}}()]}),(0,n.jsxs)("section",{className:"flex-50 mt--3_2 sm:pt-0 pt-16",children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)(c.Z,{type:"medium",children:(0,T.K)("service.loginHistory",M.locale)}),(0,n.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,n.jsxs)("label",{className:"ml-2",children:[(0,T.K)("service.loginHistory.filter",M.locale),":"]}),(0,n.jsxs)(oe.Z,{defaultValue:(0,T.K)("service.loginHistory.filter.all",M.locale),optionSelected:N,children:[(0,n.jsx)(ce.Z,{value:(0,T.K)("service.loginHistory.filter.all",M.locale),index:0,children:(0,T.K)("service.loginHistory.filter.all",M.locale)}),(0,n.jsx)(ce.Z,{value:(0,T.K)("service.loginHistory.filter.me",M.locale),index:1,children:(0,T.K)("service.loginHistory.filter.me",M.locale)})]})]})]}),(0,n.jsxs)("table",{className:"v-table w-full mt-5 overflow-x-scroll sm:overflow-hidden",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,T.K)("user.name",M.locale)}),(0,n.jsx)("th",{children:"E-mail"}),(0,n.jsx)("th",{children:(0,T.K)("service.loginHistory.timestamp",M.locale)}),(0,n.jsx)("th",{children:(0,T.K)("service.loginHistory.authMethod",M.locale)})]})}),(0,n.jsx)("tbody",{children:l.map((function(e,r){return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.email}),(0,n.jsx)("td",{children:P(e.timestamp)}),(0,n.jsx)("td",{children:e.method})]},r)}))})]}),(0,n.jsx)(F,{service:i,filter:(0,Q.ks)(x),updateLoginStamps:function(e){return a(e)}})]})]})]})]})};function pe(e,r,t,n,i,s,l){try{var a=e[s](l),o=a.value}catch(c){return void t(c)}a.done?r(o):Promise.resolve(o).then(n,i)}var ge=function(e){var r=e.serviceId,t=(0,d.useState)(),i=t[0],s=t[1],l=new R.x3;(0,d.useEffect)((function(){var e=new AbortController,t=function(){var t,n=(t=o().mark((function t(){var n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!r){t.next=7;break}return t.next=4,l.servicesManagerGetServiceDetail(r,{signal:e.signal});case 4:n=t.sent,i=null===n||void 0===n?void 0:n.data,s(i);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,E.U)(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,i){var s=t.apply(e,r);function l(e){pe(s,n,i,l,a,"next",e)}function a(e){pe(s,n,i,l,a,"throw",e)}l(void 0)}))});return function(){return n.apply(this,arguments)}}();return t(),function(){e.abort()}}),[r]);return(0,n.jsx)(n.Fragment,{children:function(){if(i)switch(i.serviceState){case R.R0.Registered:return(0,n.jsx)(xe,{service:i});case R.R0.Pending:return(0,n.jsx)(J,{service:i})}return(0,n.jsx)(q.Z,{})}()})},je=(0,i.H)((function(){var e=(0,l.Z)().user,r=(0,A.useRouter)().query.id;return(0,n.jsx)(n.Fragment,{children:function(){if(e)switch(null===e||void 0===e?void 0:e.role){case s.uU.User:return(0,n.jsx)(z,{serviceId:r});case s.uU.ServiceManager:case s.uU.Administrator:return(0,n.jsx)(ge,{serviceId:r})}return(0,n.jsx)(q.Z,{})}()})}))}},function(e){e.O(0,[978,567,774,888,179],(function(){return r=8630,e(e.s=r);var r}));var r=e.O();_N_E=r}]);