(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[54],{3941:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/services",function(){return t(1764)}])},1764:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var r=t(5893),s=t(1534),a=t(4051),i=t.n(a),c=t(1664),l=t.n(c),o=t(7294),u=t(5538),d=t(2855),v=function(e){var n=e.serviceName,t=e.bgColor,s=void 0===t?"purple":t;return(0,r.jsx)("article",{className:"card ".concat(function(){switch(s){case"purple":return"bg-light-purple";case"gray":return"bg-gray"}}()),children:(0,r.jsx)("div",{className:"card-title",children:(0,r.jsx)("p",{children:n})})})},f=function(e){return(0,r.jsx)("div",{className:"flex flex-row gap-4 items-center ".concat(e.className),children:(0,r.jsx)("input",{onChange:function(n){return e.textDidChange(n.target.value)},name:"search",type:"text",placeholder:e.placeholder,className:"textField textField--dark w-80 mt-1"})})},h=t(8339),x={src:"/_next/static/media/add_button.7e9974b4.svg",height:20,width:20},m=t(5675),p=t.n(m),j=t(5544),g=t(4574),w=t(1163);function N(e,n,t,r,s,a,i){try{var c=e[a](i),l=c.value}catch(o){return void t(o)}c.done?n(l):Promise.resolve(l).then(r,s)}var y=function(){var e=(0,o.useState)(),n=e[0],t=e[1],s=(0,o.useState)([]),a=s[0],c=s[1],m=(0,o.useState)([]),y=m[0],b=m[1],Z=(0,o.useState)(!1),_=Z[0],k=Z[1],S=new d.x3,C=(0,w.useRouter)();(0,o.useEffect)((function(){var e=new AbortController,t=function(){var t,r=(t=i().mark((function t(){var r,s,a,l,o,d,v,f;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,S.servicesManagerGetServices(n,1,20,{signal:e.signal});case 4:s=t.sent,c(null!==(a=null===(r=s.data.services)||void 0===r?void 0:r.items)&&void 0!==a?a:[]),b(null!==(l=s.data.pendingRequests)&&void 0!==l?l:[]),k(!0),t.next=18;break;case 12:t.prev=12,t.t0=t.catch(0),v=t.t0,(f=null===v||void 0===v||null===(o=v.response)||void 0===o||null===(d=o.data)||void 0===d?void 0:d.Message)&&((0,u.Am)(f),k(!0));case 18:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,n=arguments;return new Promise((function(r,s){var a=t.apply(e,n);function i(e){N(a,r,s,i,c,"next",e)}function c(e){N(a,r,s,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return t(),function(){e.abort()}}),[n]);var E=function(){return 0===a.length&&0===y.length};return _?(0,r.jsxs)("section",{className:"py-3 px-8",children:[(0,r.jsxs)("div",{className:"flex sm:flex-row flex-col justify-between mt- sm:mt-0",children:[(0,r.jsx)(f,{placeholder:(0,g.K)("services.search",C.locale),textDidChange:function(e){t(e)}}),(0,r.jsxs)("div",{className:"flex items-start sm:justify-start justify-end gap-4 absolute right-6 top-20 sm:relative sm:right-0 sm:top-0",children:[(0,r.jsx)(h.Z,{type:"large",children:(0,g.K)("services.add",C.locale)}),(0,r.jsx)(l(),{href:"/services/add-service",passHref:!0,children:(0,r.jsx)(p(),{src:x,alt:"Add service button",width:33,height:33,className:"cursor-pointer"})})]})]}),E()&&(0,r.jsx)(h.Z,{type:"body",className:"".concat(E()?"":"hidden"," mt-10"),children:(0,g.K)("general.noResults",C.locale)}),y.length>0&&(0,r.jsxs)("section",{className:"mt-10",children:[(0,r.jsx)(h.Z,{type:"large",className:"self-start",children:(0,g.K)("services.pending",C.locale)}),(0,r.jsx)("div",{className:"card-container mt-4",children:y.map((function(e,n){var t;return(0,r.jsx)(l(),{passHref:!0,href:{pathname:"services/[id]",query:{id:e.id}},children:(0,r.jsx)("button",{children:(0,r.jsx)(v,{serviceName:null!==(t=e.name)&&void 0!==t?t:"request",bgColor:"gray"})})},n)}))})]}),a.length>0&&(0,r.jsxs)("section",{className:"mt-6",children:[(0,r.jsx)(h.Z,{type:"large",className:"self-start",children:(0,g.K)("services",C.locale)}),(0,r.jsx)("div",{className:"card-container mt-4",children:a.map((function(e,n){var t;return(0,r.jsx)(l(),{passHref:!0,href:{pathname:"services/[id]",query:{id:e.id}},children:(0,r.jsx)("button",{children:(0,r.jsx)(v,{serviceName:null!==(t=e.name)&&void 0!==t?t:"service"})})},n)}))})]})]}):(0,r.jsx)(j.Z,{})};function b(e,n,t,r,s,a,i){try{var c=e[a](i),l=c.value}catch(o){return void t(o)}c.done?n(l):Promise.resolve(l).then(r,s)}var Z=function(){var e=(0,o.useState)(),n=e[0],t=e[1],s=(0,o.useState)([]),a=s[0],c=s[1],x=(0,o.useState)(!1),m=x[0],p=x[1],N=new d.x0,y=(0,w.useRouter)();(0,o.useEffect)((function(){var e=new AbortController,t=function(){var t,r=(t=i().mark((function t(){var r,s,a,l,o,d;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.servicesGetServices(n,1,20,{signal:e.signal});case 3:(r=t.sent).data.items&&c(r.data.items),p(!0),t.next=15;break;case 8:t.prev=8,t.t0=t.catch(0),l=t.t0,(d=null!==(o=null===l||void 0===l||null===(s=l.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.Message)&&void 0!==o?o:"Unknown error")&&((0,u.Am)(d),p(!0));case 15:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var e=this,n=arguments;return new Promise((function(r,s){var a=t.apply(e,n);function i(e){b(a,r,s,i,c,"next",e)}function c(e){b(a,r,s,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return t(),function(){e.abort()}}),[n]);return m?(0,r.jsxs)("section",{className:"py-3 px-8",children:[(0,r.jsxs)("div",{className:"flex sm:flex-row flex-col justify-between mt-5 sm:mt-0",children:[(0,r.jsx)(h.Z,{type:"large",className:"self-start",children:(0,g.K)("services",y.locale)}),(0,r.jsx)(f,{placeholder:(0,g.K)("services.search",y.locale),textDidChange:function(e){t(e)}})]}),(0,r.jsxs)("section",{className:"mt-6",children:[(0,r.jsx)(h.Z,{type:"body",className:n&&""!==n&&0==a.length?"":"hidden",children:"No results..."}),(0,r.jsx)("div",{className:"card-container",children:a.map((function(e,n){var t;return(0,r.jsx)(l(),{passHref:!0,href:{pathname:"services/[id]",query:{id:e.id}},children:(0,r.jsx)("button",{children:(0,r.jsx)(v,{serviceName:null!==(t=e.name)&&void 0!==t?t:"service"})})},n)}))})]})]}):(0,r.jsx)(j.Z,{})},_=t(1587),k=(0,t(7313).H)((function(){var e=(0,_.Z)().user;return(0,r.jsx)(r.Fragment,{children:function(){switch(null===e||void 0===e?void 0:e.role){case s.uU.User:return(0,r.jsx)(Z,{});case s.uU.ServiceManager:return(0,r.jsx)(y,{})}}()})}))},7313:function(e,n,t){"use strict";t.d(n,{H:function(){return x}});var r=t(4051),s=t.n(r),a=t(5893),i=t(7294),c=t(2640),l=t(2855),o=t(1587),u=t(5544),d=t(8339),v=function(){return(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsxs)("section",{className:"text-center",children:[(0,a.jsx)(d.Z,{className:"purple",type:"medium",children:"Forbidden access"}),(0,a.jsx)(d.Z,{type:"body",children:"You do not have permission to access this page."})]})})};function f(e,n,t,r,s,a,i){try{var c=e[a](i),l=c.value}catch(o){return void t(o)}c.done?n(l):Promise.resolve(l).then(r,s)}function h(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function i(e){f(a,r,s,i,c,"next",e)}function c(e){f(a,r,s,i,c,"throw",e)}i(void 0)}))}}var x=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(){var t=(0,i.useState)(!1),r=t[0],d=t[1],f=(0,i.useState)(!1),x=f[0],m=f[1],p=(0,c.Z)().auth,j=(0,o.Z)(),g=j.user,w=j.setUser,N=new l.Wj;return(0,i.useEffect)((function(){var e=new AbortController,n=function(){var n=h(s().mark((function n(){var t;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,N.userGetProfile({signal:e.signal});case 3:t=n.sent,w(t.data),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){e.abort()}}),[]),(0,i.useEffect)((function(){d(void 0!==(null===p||void 0===p?void 0:p.token))}),[p]),(0,i.useEffect)((function(){0!=n.length?g&&g.role&&n.includes(g.role)&&m(!0):m(!0)}),[g]),r&&x?(0,a.jsx)(e,{}):g&&!x?(0,a.jsx)(v,{}):(0,a.jsx)(u.Z,{})}}}},function(e){e.O(0,[774,888,179],(function(){return n=3941,e(e.s=n);var n}));var n=e.O();_N_E=n}]);