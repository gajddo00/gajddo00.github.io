(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{9471:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return t(1566)}])},5961:function(e,r){"use strict";r.Z={src:"/_next/static/media/random_dice.e9ba1caa.svg",height:1024,width:1024}},3400:function(e,r,t){"use strict";t.d(r,{Z:function(){return f}});var n=t(5893),s=t(7294),a={src:"/_next/static/media/eye_closed.0a2ad6ae.svg",height:22,width:22},c={src:"/_next/static/media/eye_open.05f1887d.svg",height:16,width:22},o=t(5675),i=t.n(o);function u(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){u(e,r,t[r])}))}return e}function d(e,r){if(null==e)return{};var t,n,s=function(e,r){if(null==e)return{};var t,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(s[t]=e[t]);return s}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var f=function(e){var r=e.required,t=void 0!==r&&r,o=e.disabled,u=void 0!==o&&o,f=d(e,["required","disabled"]),m=f.name,p=f.type,v=f.labelValue,w=f.error,h=f.register,x=(0,s.useState)(!1),b=x[0],g=x[1];return(0,n.jsxs)("div",{className:"flex flex-col ".concat(f.className),children:[(0,n.jsxs)("label",{htmlFor:f.name,className:"mr-2 ml-2",children:[v,t&&(0,n.jsx)("span",{className:"error",children:" *"})]}),(0,n.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,n.jsxs)("div",{className:"textField flex justify-between gap-2 pr-2 items-center w-full ".concat(u?"textField--dark":""),children:[(0,n.jsx)("input",l({},h&&h(m),{defaultValue:f.value,disabled:u,name:m,type:"password"==p&&b?"text":p,className:"w-full"})),"password"==f.type&&(0,n.jsx)("button",{tabIndex:-1,title:"change password visibility",className:"flex items-center",type:"button",onClick:function(){return g((function(e){return!e}))},children:(0,n.jsx)(i(),{src:b?c:a,width:18,height:18,alt:"eye"})})]}),f.accessoryIcon&&(0,n.jsx)("button",{tabIndex:-1,className:"textField_action-button flex items-center justify-center",type:"button",title:"generate random password",onClick:f.accessoryOnClick,children:(0,n.jsx)(i(),{src:f.accessoryIcon,width:23,height:23,alt:"input accessory icon"})})]}),(0,n.jsx)("span",{className:"error ml-2 mr-2",children:w})]})}},1566:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return N}});var n=t(5893),s=t(1163),a=t(4051),c=t.n(a),o=t(3400),i=t(5496),u=t(4231),l=t(7536),d=t(5524),f=t(8339),m=t(5961),p=t(2513),v=t(7294),w=t(1534),h=t(5538),x=t(4574),b=t(8822);function g(e,r,t,n,s,a,c){try{var o=e[a](c),i=o.value}catch(u){return void t(u)}o.done?r(i):Promise.resolve(i).then(n,s)}function y(e){return function(){var r=this,t=arguments;return new Promise((function(n,s){var a=e.apply(r,t);function c(e){g(a,n,s,c,o,"next",e)}function o(e){g(a,n,s,c,o,"throw",e)}c(void 0)}))}}var j=u.Ry({currentPassword:u.Z_(),newPassword:u.Z_(),newPasswordConfirm:u.Z_()}).required(),P=function(){var e,r,t,a=(0,v.useState)(),u=a[0],g=a[1],P=(0,l.cI)({resolver:(0,i.X)(j)}),N=P.register,k=P.handleSubmit,O=P.reset,_=P.setValue,Z=P.formState.errors,C=new w.Wj,S=(0,v.useMemo)((function(){return new AbortController}),[]),E=(0,s.useRouter)();(0,v.useEffect)((function(){return function(){S.abort()}}),[S]);var I=function(e){return e.newPassword===e.newPasswordConfirm},K=function(){var e=y(c().mark((function e(r){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.userUpdateSettings(r,{signal:S.signal});case 3:t=e.sent,g(""),O(),(0,h.Am)(t.data.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,b.U)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(r){return e.apply(this,arguments)}}(),V=function(){var e=y(c().mark((function e(r){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I(r)){e.next=3;break}return g((0,x.K)("error.passwordMatch",E.locale)),e.abrupt("return");case 3:if(!(Object.keys(r).filter((function(e){return r[e]&&""!=r[e]})).length>0)){e.next=8;break}return t={oldPassword:r.currentPassword,newPassword:r.newPassword},e.next=8,K(t);case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,n.jsxs)("form",{onSubmit:k(V),children:[(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row sm:gap-20 mt-16",children:[(0,n.jsxs)("section",{children:[(0,n.jsx)(f.Z,{type:"medium",children:(0,x.K)("settings.changePassword",E.locale)}),(0,n.jsxs)("div",{className:"mt-8 flex flex-col items-start gap-4 sm:h-screen-50",children:[(0,n.jsx)(o.Z,{className:"w-full",name:"currentPassword",labelValue:(0,x.K)("settings.currentPassword",E.locale),type:"password",error:null===(e=Z.currentPassword)||void 0===e?void 0:e.message,register:N}),(0,n.jsx)(o.Z,{className:"w-full",name:"newPassword",labelValue:(0,x.K)("settings.newPassword",E.locale),type:"password",error:null===(r=Z.newPassword)||void 0===r?void 0:r.message,register:N,accessoryIcon:m.Z,accessoryOnClick:function(){var e=(0,p.n)();_("newPassword",e)}}),(0,n.jsx)(o.Z,{className:"w-full",name:"newPasswordConfirm",labelValue:(0,x.K)("settings.confirmPassword",E.locale),type:"password",error:null===(t=Z.newPasswordConfirm)||void 0===t?void 0:t.message,register:N}),(0,n.jsx)("span",{className:"error ml-2 mt-4 text-center flex justify-center",children:u})]})]}),(0,n.jsx)("section",{children:(0,n.jsx)(f.Z,{type:"medium",children:"Automatic logout"})})]}),(0,n.jsx)(d.Z,{label:(0,x.K)("general.save",E.locale),className:"btn bg-dark block m-auto mt-4",submit:!0})]})},N=(0,t(7313).H)((function(){var e=(0,s.useRouter)();return(0,n.jsxs)("section",{className:"pt-3 px-8",children:[(0,n.jsx)(f.Z,{type:"large",className:"self-start",children:(0,x.K)("settings",e.locale)}),(0,n.jsx)(P,{})]})}))},7313:function(e,r,t){"use strict";t.d(r,{H:function(){return v}});var n=t(4051),s=t.n(n),a=t(5893),c=t(7294),o=t(2640),i=t(2855),u=t(1587),l=t(5544),d=t(8339),f=function(){return(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsxs)("section",{className:"text-center",children:[(0,a.jsx)(d.Z,{className:"purple",type:"medium",children:"Forbidden access"}),(0,a.jsx)(d.Z,{type:"body",children:"You do not have permission to access this page."})]})})};function m(e,r,t,n,s,a,c){try{var o=e[a](c),i=o.value}catch(u){return void t(u)}o.done?r(i):Promise.resolve(i).then(n,s)}function p(e){return function(){var r=this,t=arguments;return new Promise((function(n,s){var a=e.apply(r,t);function c(e){m(a,n,s,c,o,"next",e)}function o(e){m(a,n,s,c,o,"throw",e)}c(void 0)}))}}var v=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(){var t=(0,c.useState)(!1),n=t[0],d=t[1],m=(0,c.useState)(!1),v=m[0],w=m[1],h=(0,o.Z)().auth,x=(0,u.Z)(),b=x.user,g=x.setUser,y=new i.Wj;return(0,c.useEffect)((function(){var e=new AbortController,r=function(){var r=p(s().mark((function r(){var t;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,y.userGetProfile({signal:e.signal});case 3:t=r.sent,g(t.data),r.next=9;break;case 7:r.prev=7,r.t0=r.catch(0);case 9:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}();return r(),function(){e.abort()}}),[]),(0,c.useEffect)((function(){d(void 0!==(null===h||void 0===h?void 0:h.token))}),[h]),(0,c.useEffect)((function(){0!=r.length?b&&b.role&&r.includes(b.role)&&w(!0):w(!0)}),[b]),n&&v?(0,a.jsx)(e,{}):b&&!v?(0,a.jsx)(f,{}):(0,a.jsx)(l.Z,{})}}},2513:function(e,r,t){"use strict";t.d(r,{n:function(){return n}});var n=function(){for(var e="0123456789abcdefghijklmnopqrstuvwxyz!@#$%^&*()ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="",t=0;t<=12;t++){var n=Math.floor(Math.random()*e.length);r+=e.substring(n,n+1)}return r}}},function(e){e.O(0,[978,774,888,179],(function(){return r=9471,e(e.s=r);var r}));var r=e.O();_N_E=r}]);